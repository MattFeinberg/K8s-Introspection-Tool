<!DOCTYPE html>
<html>
<head>
<meta http-equiv="refresh" content="60" />
<style>
h1 {text-align: left;}
</style>
<link rel="stylesheet" href="/css/style.css">
</head>
<body>

<h1>{{.Node.NodeName}}</h1>
<button class="homebutton" onclick="window.location.href = '/home';">Home</button>
<hr id="line"/>

<p>
Guest OS Version: {{.Node.OSVersion}}
<span style="float:right; font-style: italic;">Last Updated: {{.TimeUpdated}}</span><br>
Kubernetes Version: {{.Node.K8sVersion}}<br>
Provider: {{.Node.Provider}}<br>
Container Runtime: {{.Node.ContainerRuntime}}<br>
GPUs connected: {{.Node.AttachedGpus}}<br>
CUDA Version: {{.Node.CudaVersion}}<br>
CUDA Driver Version: {{.Node.DriverVersion}}<br>
</p>


<div id="GPUs" style="white-space: pre"><h3>GPUs</h3></div>
<script>
    var GPUs = {{.Node.GPUs}}
    var length = GPUs.length
    element = document.getElementById("GPUs");
    for (var i = 0; i < length; i++) {
        var tag = document.createElement("p");
        var text = document.createTextNode("GPU Name: " + GPUs[i].ProductName + "\n");
        tag.appendChild(text);
        text = document.createTextNode("GPU Part Number: " + GPUs[i].GpuPartNumber + "\n");
        tag.appendChild(text);
        text = document.createTextNode("FB Memory Size: " + GPUs[i].FbMemoryUsage.Total + "\n");
        tag.appendChild(text);
        text = document.createTextNode("GSP Firmware Version: " + GPUs[i].GspFirmwareVersion + "\n");
        tag.appendChild(text);
        if (GPUs[i].HostVgpuMode == null) {
            text = document.createTextNode("Physical/Virtual: Physical\n");
        } else {
            text = document.createTextNode("Physical/Virtual: Virtual\n");
            // more Vgpu info here?
        }
        tag.appendChild(text);
        text = document.createTextNode("MIG: " + GPUs[i].MigMode.CurrentMig + "\n");
        tag.appendChild(text);
        element.appendChild(tag);
    }
</script>
<button class="button" onclick="window.location.href = '/clusterinfo';"> Cluster Information </button>

</body>
</html>
